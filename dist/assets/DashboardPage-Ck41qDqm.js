import{R as X,r as i,u as Y,j as e,B as r,a as L,S as Z,b as ee,C as g,c as te,d as S,T as y,A as se,e as B,F as le,I as ie,f as ne,M as ae,g as ce,h as oe,i as re,K as de,s as n,k as ue}from"./index-MEpY8aHq.js";const pe=["09-10","10-11","11-12","12-13","13-14","14-15","15-16","16-17","17-18","18-19"];function xe(){const[N,A]=X.useState(!1),[F,he]=i.useState(null),[a,k]=i.useState({dailySummary:{},structuredData:{}}),[w,_]=i.useState([]),[R,j]=i.useState(!1),[v,O]=i.useState([]),[d,K]=i.useState([]),[u,C]=i.useState(""),[p,T]=i.useState(""),[$,b]=i.useState({employeeIds:[]}),[M,f]=i.useState(!1),h=i.useRef(null),U=s=>{T(s.target.value)},V=(s,l)=>{K(l)},D=s=>{C(s.target.value)},z=Y(),q=()=>{z("/TeamLoggerData")},W=()=>{if(!d.length||!u||!p){b([]),f(!0);return}f(!1);const s=d.map(l=>({employeeId:l.emp_code??"",fileName:`${u}_${p}_${l.emp_code}.enc`}));b({employeeIds:s}),setTimeout(()=>{h.current&&(h.current.fetchDataFromParent(),j(!0))},0)},G=()=>{K([]),C(""),T("")},H=()=>{if(!u||!p){b([]),f(!0);return}f(!1);const s=v.map(l=>({employeeId:l.emp_code,fileName:`${u}_${p}_${l.emp_code}.enc`}));b({employeeIds:s}),setTimeout(()=>{h.current&&(h.current.fetchDataFromParent(),j(!0))},0)},J=[{key:"empId",label:"Emp Id",icon:n},{key:"empName",label:"Employee Name",icon:n},{key:"date",label:"Date",icon:n},{key:"time",label:"Time Period",icon:n},{key:"visibleKeys",label:"Visible Keys",icon:n},{key:"visiblePercentage",label:"Visible Percentage",icon:n},{key:"invisibleKeys",label:"Invisible Keys",icon:n},{key:"totalKeys",label:"Total Keys",icon:n},{key:"whitespaceKeys",label:"Whitespace Keys",icon:n},{key:"whitespacePercentage",label:"Whitespace Percentage",icon:n},{key:"totalKeysBelow10k",label:"Total Keys Below 10k",icon:n},{key:"visibleExceeds85",label:"visible Exceeds 85",icon:n},{key:"whitespaceExceeds75",label:"whiteSpace Exceeds 75",icon:n}];return i.useEffect(()=>{if(Object.keys(a.structuredData).length){const s=[];Object.keys(a.structuredData).map(l=>{var m;let c={};if(a.structuredData[l]){const o=a.structuredData[l];if(Object.keys(o).length>0)Object.keys(o).map(x=>{Object.keys(o[x]).map(P=>{var E,I;const t=(E=o[x][P])==null?void 0:E.keylogerData;if((t==null?void 0:t.totalKeysBelow10k)===!1||(t==null?void 0:t.whitespaceExceeds75)===!0||(t==null?void 0:t.visibleExceeds85)===!0){c={date:x,time:P,visibleKeys:t==null?void 0:t.visibleKeys,visiblePercentage:Number.isNaN(t==null?void 0:t.visiblePercentage)?0:t==null?void 0:t.visiblePercentage,invisibleKeys:t==null?void 0:t.invisibleKeys,totalKeys:t==null?void 0:t.totalKeys,whitespaceKeys:t==null?void 0:t.whitespaceKeys,whitespacePercentage:Number.isNaN(t==null?void 0:t.whitespacePercentage)?0:t==null?void 0:t.whitespacePercentage,totalKeysBelow10k:(t==null?void 0:t.totalKeysBelow10k)===!0?"true":"false",visibleExceeds85:(t==null?void 0:t.visibleExceeds85)===!0?"true":"false",whitespaceExceeds75:(t==null?void 0:t.whitespaceExceeds75)==!1?"false":"true"};const Q={empId:l,empName:(I=a.dailySummary[l].userData)==null?void 0:I.name,...c};s.push(Q)}})});else{const x={empId:l,empName:(m=a.dailySummary[l].userData)==null?void 0:m.name,totalKeys:0,visibleKeys:0,visiblePercentage:0,invisibleKeys:0,whitespaceKeys:0,whitespacePercentage:0,totalKeysBelow10k:!0,visibleExceeds85:!0,whitespaceExceeds75:!1};s.push(x)}}}),_(s),j(!1)}},[a]),i.useEffect(()=>{(async()=>{try{const c=(await ue()).data||[],m=c.filter(o=>o.emp_code);O(m),m.length&&console.log(c,"shubhamMohite12345677")}catch{}})()},[]),e.jsx(e.Fragment,{children:e.jsxs(r,{sx:{width:"100%",padding:"14px 11px"},children:[e.jsx(L,{style:{border:"1px solid black",backgroundColor:"#696969",color:"white"},children:"Key Logger Activity"}),e.jsx(L,{onClick:q,style:{border:"1px solid black",marginLeft:"20px"},children:"Team Logger Data"}),e.jsxs(Z,{children:[e.jsx(r,{children:e.jsx(ee,{children:"Filters"})}),e.jsxs(r,{sx:{display:"flex",gap:"20px"},children:[e.jsx(g,{btnText:"Select All",buttonVariant:"contained",btnStyle:{margin:"10px",width:"103px"},buttonId:"outlined-button",handleButtonClick:H}),e.jsx(g,{btnText:"Apply",buttonVariant:"contained",btnStyle:{margin:"10px",width:"103px"},buttonId:"outlined-button",handleButtonClick:W}),e.jsx(g,{btnText:"Clear All",buttonVariant:"outlined",btnStyle:{margin:"10px",width:"103px"},buttonId:"outlined-button",handleButtonClick:G})]})]}),e.jsxs(te,{children:[e.jsxs(S,{sx:{width:"30%"},children:[e.jsx(y,{sx:{color:"#0f172a",fontSize:"12px"},children:"Employee Name"}),e.jsx(se,{multiple:!0,options:v.filter(s=>s.status==="ACTIVE"),getOptionLabel:s=>`${s.name} (${s.emp_code})`,value:d,onChange:V,renderInput:s=>e.jsx(B,{...s,label:"Select a user",variant:"outlined"})}),d.length>0&&e.jsxs("div",{style:{marginTop:"10px"},children:[e.jsx("strong",{children:"Selected Users:"}),e.jsx("ul",{children:d.map(s=>e.jsx("li",{children:s.name},s.guid))})]})]}),e.jsxs(S,{sx:{width:"30%"},children:[e.jsx(y,{sx:{color:"#0f172a",fontSize:"12px"},children:"From"}),e.jsx(B,{fullWidth:!0,label:"Select Date",type:"date",value:u,onChange:D,InputLabelProps:{shrink:!0},inputProps:{style:{cursor:"pointer"}}})]}),e.jsxs(S,{sx:{width:"30%"},children:[e.jsx(y,{sx:{color:"#0f172a",fontSize:"12px"},children:"Time Period"}),e.jsxs(le,{children:[e.jsx(ie,{id:"demo-simple-select-label",children:"Time Period"}),e.jsx(ne,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:p,label:"Time Period",onChange:U,children:pe.map(s=>e.jsx(ae,{value:s,children:s},s))})]})]})]}),e.jsx(r,{sx:{marginTop:{md:"10",sm:"20"}},children:e.jsx(y,{sx:{color:"red"},children:M?"All fileds are required *":""})}),R?e.jsx(r,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"300px"},children:e.jsx(ce,{})}):e.jsx(r,{sx:{marginTop:"20px",width:"1200px"},children:w.length?e.jsx(e.Fragment,{children:e.jsx(oe,{columns:J,rows:w,showPagination:!0,pageSize:15})}):e.jsx(e.Fragment,{children:e.jsx("h5",{style:{textAlign:"center",marginTop:"140px"},children:"Looks like thereâ€™s no data here. Apply a filter to fetch relevant results."})})}),e.jsx(re,{open:N,onClose:()=>A(!1),rowData:F||void 0}),e.jsx(de,{fileData:a,setFileData:k,formList:$,ref:h})]})})}export{xe as default};
